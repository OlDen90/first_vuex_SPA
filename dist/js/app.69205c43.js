(function(){var t={9348:function(){},3253:function(t,e,s){"use strict";var r=s(144),o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("router-view")],1)},n=[],a=s(9348),i=s.n(a),u=i(),c=s(1001),l=(0,c.Z)(u,o,n,!1,null,null,null),p=l.exports,d=s(8345),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"card user"},[e("h1",[t._v("Список пользователей")]),e("hr"),0!==t.allUsers.length?e("ul",{staticClass:"list"},[t._l(t.allUsers,(function(s,r){return e("li",{key:s.id,staticClass:"user-list",style:{background:r%2===0?"#f3f3f3":"#fff"}},[t._v(" "+t._s(r+1)+". "+t._s(s.name)+" "),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn open",on:{click:function(e){return t.navigateToUserPage(s.id,"user")}}},[t._v("Инфо")]),e("button",{staticClass:"btn open",on:{click:function(e){return t.navigateToUserPage(s.id,"albums")}}},[t._v("Альбомы")]),e("button",{staticClass:"btn open open-last",on:{click:function(e){return t.navigateToUserPage(s.id,"posts")}}},[t._v("Посты")])])])})),e("br"),e("li",[t._v("Общее количество пользователей: "+t._s(t.allUsers.length))])],2):e("div",[t._v("Пользователей пока нет. Добавьте первого")])])])},m=[],f=(s(7658),s(629)),v={computed:(0,f.Se)(["allUsers"]),async mounted(){await this.$store.dispatch("fetchUsers")},methods:{navigateToUserPage(t,e){this.$router.push({name:"user",params:{id:t,contentType:e}})}}},b=v,y=(0,c.Z)(b,h,m,!1,null,null,null),_=y.exports,g=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"card user"},[e("div",{staticClass:"user-top"},[e("h3",[t._v(t._s(t.title))]),e("button",{staticClass:"btn",on:{click:function(e){return t.navigateToUsersList()}}},[t._v("Назад")])]),e("hr"),e("h1",[t._v(t._s(t.userName))]),e("div",{staticClass:"btns"},[e("button",{staticClass:"btn transition",class:{active:"user"===t.contentType},on:{click:function(e){return t.navigateToUserInfo()}}},[t._v("Информация")]),e("button",{staticClass:"btn transition",class:{active:"albums"===t.contentType},on:{click:function(e){return t.navigateToAlbums()}}},[t._v("Альбомы")]),e("button",{staticClass:"btn transition",class:{active:"posts"===t.contentType},on:{click:function(e){return t.navigateToPosts()}}},[t._v("Посты")])]),e("div",{staticClass:"content"},["user"===t.contentType&&null!==t.userId&&null!==t.userName?e("div",{staticClass:"user-info"},[e("h4",[t._v("Личные данные:")]),e("ul",[e("li",[t._v("логин: "),e("b",[t._v(t._s(t.userUsername))])]),e("li",[t._v("email: "),e("b",[t._v(t._s(t.userEmail))])]),e("li",[t._v("адрес: "),e("b",[t._v(t._s(t.userStreet)+", "+t._s(t.userSuite)+", "+t._s(t.userCity)+", "+t._s(t.userZipcode))])])])]):t._e(),"albums"===t.contentType?e("AlbumsList",{attrs:{userId:t.userId}}):t._e(),"posts"===t.contentType?e("PostsList",{attrs:{userId:t.userId}}):t._e()],1)])])},C=[],P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"albums"},[e("h4",[t._v("Альбомы:")]),t._l(t.allAlbums,(function(s,r){return e("div",{key:s.id+r,staticClass:"album",style:{background:r%2===0?"#f3f3f3":"#fff"}},[e("h3",[t._v(t._s(s.title))]),e("carousel",{attrs:{perPage:5,perMove:5}},t._l(s.photos,(function(s){return e("slide",{key:s.id},[e("img",{attrs:{src:s.thumbnailUrl,alt:"Album Thumbnail"}}),e("p",{staticClass:"album-text"},[t._v(t._s(s.title))])])})),1)],1)})),e("br"),e("p",[t._v("Количество альбомов: "+t._s(t.allAlbums.length))])],2)},U=[],T=s(7409),w={components:{Carousel:T.Carousel,Slide:T.Slide},computed:(0,f.Se)(["allAlbums","allPhotos"]),async beforeMount(){const t=this.$route.params.id;await this.$store.dispatch("fetchAlbums",t),await this.$store.dispatch("fetchPhotos",t)}},$=w,I=(0,c.Z)($,P,U,!1,null,"e8d9b2a4",null),S=I.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"posts"},[e("h4",[t._v("Посты:")]),e("InputField",{ref:"inputField"}),t._l(t.validPosts,(function(s,r){return e("div",{key:s.id+r,staticClass:"post",style:{background:r%2===0?"#f3f3f3":"#fff"}},[e("div",[e("p",[t._v(t._s(r+1)+". "),e("b",[t._v("Название:")]),t._v(" "+t._s(s.title))]),e("button",{staticClass:"btn edit",on:{click:function(e){return t.editTitle(s.id,s.title)}}},[t._v("Изменить")])]),e("div",[e("p",[e("b",[t._v("Текст:")]),t._v(" "+t._s(s.body))]),e("button",{staticClass:"btn edit",on:{click:function(e){return t.editBody(s.id,s.body)}}},[t._v("Изменить")])])])})),e("p",[t._v("Количество постов: "+t._s(t.postsCount))])],2)},k=[],Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-field-container"},[e("form",{staticClass:"input-field",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[e("label",{attrs:{for:"postTitle"}},[t._v("Заголовок поста:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.postTitle,expression:"postTitle"}],attrs:{type:"text",id:"postTitle"},domProps:{value:t.postTitle},on:{input:function(e){e.target.composing||(t.postTitle=e.target.value)}}}),e("br"),e("label",{attrs:{for:"postContent"}},[t._v("Текст поста:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.postContent,expression:"postContent"}],attrs:{id:"postContent"},domProps:{value:t.postContent},on:{input:function(e){e.target.composing||(t.postContent=e.target.value)}}}),e("button",{staticClass:"btn btn-submit"},[t._v("Опубликовать")])]),t.errorMassage?e("p",{staticClass:"error-message"},[t._v(t._s(t.errorMassage))]):t._e()])},x=[],A={data(){return{postTitle:"",postContent:"",errorMassage:""}},methods:{...(0,f.OI)(["createPost"]),submit(){this.createPost({title:this.postTitle,body:this.postContent,id:Date.now()}),this.postTitle=this.postContent=""}}},E=A,O=(0,c.Z)(E,Z,x,!1,null,"36e17602",null),N=O.exports,M={computed:(0,f.Se)(["validPosts","postsCount"]),methods:{...(0,f.nv)(["updatePost"]),async editTitle(t,e){const s=prompt("Введите новое название поста",e);null!==s&&await this.updatePost({id:t,title:s})},async editBody(t,e){const s=prompt("Введите новый текст поста",e);null!==s&&await this.updatePost({id:t,body:s})}},components:{InputField:N},async mounted(){const t=this.$route.params.id;await this.$store.dispatch("fetchPosts",t)},async beforeMount(){const t=this.$route.params.id;await this.$store.dispatch("fetchPosts",t)}},L=M,F=(0,c.Z)(L,j,k,!1,null,null,null),B=F.exports,D={props:["id"],created(){const t=this.$route.params.id,e=localStorage.getItem("content-type"),s=e||"user";this.$store.dispatch("fetchUserById",t),this.$store.commit("setContentType",s)},data(){return{title:"Пользователь"}},components:{AlbumsList:S,PostsList:B},computed:{contentType(){return this.$store.getters.currentContentType},userId(){return this.$store.getters.currentUserId},userName(){return this.$store.getters.currentUserName},userUsername(){return this.$store.getters.currentUserUsername},userEmail(){return this.$store.getters.currentUserEmail},userStreet(){return this.$store.getters.currentUserStreet},userSuite(){return this.$store.getters.currentUserSuite},userCity(){return this.$store.getters.currentUserCity},userZipcode(){return this.$store.getters.currentUserZipcode}},methods:{navigateToUsersList(){this.$router.push("/")},navigateToUserInfo(){this.$store.commit("setContentType","user"),localStorage.setItem("content-type","user")},navigateToAlbums(){const t=this.$route.params.id;this.$store.dispatch("fetchAlbums",t),this.$store.commit("setContentType","albums"),localStorage.setItem("content-type","albums")},navigateToPosts(){const t=this.$route.params.id;this.$store.dispatch("fetchPosts",t),this.$store.commit("setContentType","posts"),localStorage.setItem("content-type","posts")}}},z=D,J=(0,c.Z)(z,g,C,!1,null,null,null),q=J.exports;r.ZP.use(d.ZP);const G=[{path:"/",component:_},{path:"/user/:id",name:"user",component:q,props:!0},{path:"/album/:id",name:"album",component:S,props:!0},{path:"/post/:id",name:"post",component:B,props:!0}],H=new d.ZP({mode:"history",routes:G,base:"/first_vuex_SPA/"});var K=H,Q={actions:{async fetchPosts({commit:t},e){try{const s=await fetch(`https://jsonplaceholder.typicode.com/posts?userId=${e}`),r=await s.json();t("updatePosts",r)}catch(s){console.error("Error fetching posts:",s)}},async updatePost({commit:t},e){try{const s=await fetch(`https://jsonplaceholder.typicode.com/posts/${e.id}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}),r=await s.json();t("updateSinglePost",r)}catch(s){console.error("Error updating post:",s)}}},mutations:{updatePosts(t,e){t.posts=e},createPost(t,e){t.posts.unshift(e)},updateSinglePost(t,e){const s=t.posts.findIndex((t=>t.id===e.id));-1!==s&&t.posts.splice(s,1,{...t.posts[s],...e})}},state:{posts:[]},getters:{validPosts(t){return t.posts.filter((t=>t.title&&t.body))},allPosts(t){return t.posts},postsCount(t,e){return e.validPosts.length}}},R={actions:{async fetchAlbums({commit:t},e){try{const s=await fetch(`https://jsonplaceholder.typicode.com/albums?userId=${e}`),r=await s.json();t("updateAlbums",r)}catch(s){console.error("Error fetching albums:",s)}},async fetchPhotos({commit:t},e){try{const s=await fetch(`https://jsonplaceholder.typicode.com/photos?userId=${e}`),r=await s.json();t("updatePhotos",r)}catch(s){console.error("Error fetching photos:",s)}}},mutations:{updateAlbums(t,e){t.albums=e.map((t=>({...t,photos:[]})))},updatePhotos(t,e){t.photos=e,t.albums.forEach((t=>{t.photos=e.filter((e=>e.albumId===t.id))}))}},state:{albums:[],photos:[]},getters:{allAlbums(t){return t.albums},allPhotos(t){return t.photos}}},V={actions:{async fetchUsers({commit:t}){const e=await fetch("https://jsonplaceholder.typicode.com/users/"),s=await e.json();t("updateUsers",s)},async fetchUserById({commit:t,dispatch:e},s){try{const r=await fetch(`https://jsonplaceholder.typicode.com/users/${s}`),o=await r.json();t("updateCurrentUser",o),e("fetchAlbums",s)}catch(r){console.error("Error fetching user:",r)}},async fetchPosts({commit:t},e){try{const s=await fetch(`https://jsonplaceholder.typicode.com/posts?userId=${e}`),r=await s.json();t("updatePosts",r)}catch(s){console.error("Error fetching posts:",s)}}},mutations:{updateUsers(t,e){t.users=e},setUserId(t,e){t.userId=e},setContentType(t,e){t.contentType=e},updateCurrentUser(t,e){t.currentUser=e,t.userName=e.name,t.userUsername=e.username,t.userEmail=e.email,t.userStreet=e.address.street,t.userSuite=e.address.suite,t.userCity=e.address.city,t.userZipcode=e.address.zipcode},updatePosts(t,e){t.posts=e},updateAlbums(t,e){t.albums=e.map((t=>({...t,photos:[]})))}},state:{users:[],userId:"",contentType:"user",userName:null,userUsername:null,userEmail:null,userStreet:null,userSuite:null,userCity:null,userZipcode:null,currentUser:{}},getters:{allUsers(t){return t.users},currentContentType(t){return t.contentType},currentUserId(t){return t.userId},currentUserName(t){return t.currentUser.name},currentUserUsername(t){return t.userUsername},currentUserEmail(t){return t.currentUser.email},currentUserStreet(t){return t.userStreet},currentUserSuite(t){return t.userSuite},currentUserCity(t){return t.userCity},currentUserZipcode(t){return t.userZipcode}}};r.ZP.use(f.ZP);var W=new f.ZP.Store({modules:{post:Q,album:R,user:V}});new r.ZP({router:K,store:W,render:t=>t(p)}).$mount("#app")}},e={};function s(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,r,o,n){if(!r){var a=1/0;for(l=0;l<t.length;l++){r=t[l][0],o=t[l][1],n=t[l][2];for(var i=!0,u=0;u<r.length;u++)(!1&n||a>=n)&&Object.keys(s.O).every((function(t){return s.O[t](r[u])}))?r.splice(u--,1):(i=!1,n<a&&(a=n));if(i){t.splice(l--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var l=t.length;l>0&&t[l-1][2]>n;l--)t[l]=t[l-1];t[l]=[r,o,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,n,a=r[0],i=r[1],u=r[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(u)var l=u(s)}for(e&&e(r);c<a.length;c++)n=a[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(l)},r=self["webpackChunkschool_project1"]=self["webpackChunkschool_project1"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(3253)}));r=s.O(r)})();
//# sourceMappingURL=app.69205c43.js.map